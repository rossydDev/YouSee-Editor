@import "tailwindcss";
@import "tippy.js/dist/tippy.css";

/* Configuração do Tema v4 */
@theme {
  --font-mono: "Courier", monospace;
}

/* Aplicação do Estilo Base (Dark Mode forçado) */
@layer base {
  body {
    @apply bg-zinc-950 text-gray-300 font-mono;
    overflow-x: hidden; /* Evita rolagem horizontal global */
  }
}

@layer components {
  /* --- 1. COMPORTAMENTO DO EDITOR --- */
  .ProseMirror {
    @apply outline-none pointer-events-none min-h-screen flex flex-col items-center;
    counter-reset: page-counter; 
  }

  .page-node {
    @apply cursor-text shadow-xl pointer-events-auto relative; 
  }

  /* --- 2. LÓGICA DE PÁGINAS --- */
  .story-page-header {
    counter-increment: page-counter;
    counter-reset: panel-counter;
  }

  .story-page-header::before {
    content: "PAGE " counter(page-counter);
    @apply mr-2;
  }

  .page-number-slot::after {
    content: "PAGE " counter(page-counter);
  }

  /* --- 3. PAINÉIS --- */
  panel-block {
    counter-increment: panel-counter;
    @apply block mt-6 mb-8;
  }

  panel-block::before {
    content: "PANEL " counter(panel-counter);
    @apply text-orange-500 mr-2 font-bold inline-block; 
  }

  /* --- 4. DESTAQUES VISUAIS --- */
  .ProseMirror .has-focus {
    @apply border-orange-500;
  }

  .ProseMirror p.has-focus,
  .character-node.has-focus,
  .dialogue-node.has-focus,
  .sfx-node.has-focus {
    @apply border-l-4 border-t-0 border-b-0 border-r-0 pl-4 border-orange-500 rounded-none;
  }

  panel-block.has-focus .block,
  .block.has-focus { 
     @apply border-orange-500;
  }
}

/* Fix para inputs numéricos */
input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button { 
  -webkit-appearance: none; 
  margin: 0; 
}
input[type=number] {
  -moz-appearance: textfield;
}

/* --- UTILITÁRIOS (Aqui estava o erro: faltava o @) --- */
@layer utilities {
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* --- SCROLLBAR CUSTOMIZADA (PREMIUM) --- */
  /* Estilo Firefox */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #3f3f46 transparent;
  }

  /* Estilo Webkit (Chrome, Edge, Safari) */
  .custom-scrollbar::-webkit-scrollbar {
    width: 14px; /* Área de clique generosa */
    height: 14px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: #3f3f46; /* Cor da barra (Zinc-700) */
    border: 5px solid transparent; /* Cria o espaço transparente ao redor */
    background-clip: content-box;  /* A mágica: pinta só o miolo */
    border-radius: 9999px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: #52525b; /* Mais claro no hover */
    border: 4px solid transparent; /* Fica um pouco mais grosso no hover */
  }
}