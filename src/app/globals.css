@import "tailwindcss";

/* Configuração do Tema v4 */
@theme {
  --font-mono: "Courier", monospace;
}

/* Aplicação do Estilo Base (Dark Mode forçado) */
@layer base {
  body {
    @apply bg-zinc-950 text-gray-300 font-mono;
  }
}

@layer components {
  /* --- 1. COMPORTAMENTO DO EDITOR (Mesa vs Papel) --- */

  /* O Editor (O "Vidro") */
  /* pointer-events-none: O clique "atravessa" o editor e atinge o fundo preto real */
  .ProseMirror {
    @apply outline-none pointer-events-none min-h-screen flex flex-col items-center;
    /* Inicia o contador de Páginas */
    counter-reset: page-counter; 
  }

  /* A Página (O "Papel") */
  /* pointer-events-auto: O clique é capturado aqui para você poder escrever */
  .page-node {
    @apply cursor-text shadow-xl pointer-events-auto relative; 
    
    /* Lógica de Contagem */
    counter-increment: page-counter;     /* +1 Página */
    counter-reset: panel-counter;        /* Reseta Painéis */
  }

  /* --- 2. DESTAQUES VISUAIS (Highlight/Focus) --- */

  /* Regra Geral */
  .ProseMirror .has-focus {
    @apply border-orange-500;
  }

  /* Refinamento para Nós de Texto (Personagem, Diálogo, Parágrafo) */
  /* Borda lateral esquerda (estilo marcador) */
  .ProseMirror p.has-focus,
  .character-node.has-focus,
  .dialogue-node.has-focus,
  .sfx-node.has-focus {
    @apply border-l-4 border-t-0 border-b-0 border-r-0 pl-4 border-orange-500 rounded-none;
  }

  /* Refinamento Exclusivo para o PAINEL */
  /* Borda completa quando focado */
  panel-block.has-focus .block,
  .block.has-focus { 
     @apply border-orange-500;
  }

  /* --- 3. NUMERAÇÃO AUTOMÁTICA (Counters) --- */

  /* O Painel (Panel Node) */
  panel-block {
    counter-increment: panel-counter; /* +1 Painel */
    @apply block mt-6; /* Espaçamento entre cenas */
  }

  /* A Etiqueta do Painel ("PANEL 1:") */
  panel-block::before {
    content: "PANEL " counter(panel-counter) ": ";
    @apply text-orange-500 mr-2 font-bold inline-block; 
  }

  /* [NOVO] O Número da Página ("PAGE 1") */
  /* Esta regra preenche o slot vazio <span> lá do React */
  .page-number-slot::after {
    content: "PAGE " counter(page-counter);
  }
}